CREATE TABLE Administrador (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    correo VARCHAR(255) NOT NULL,
    contrasena VARCHAR(255) NOT NULL
);

CREATE TABLE Cliente (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    correo VARCHAR(255) NOT NULL,
    contrasena VARCHAR(255) NOT NULL,
    telefono VARCHAR(50),
    preferencias TEXT
);

CREATE TABLE Estilista (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    especialidad VARCHAR(255)
);

CREATE TABLE Servicio (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    precio DECIMAL(10, 2) NOT NULL,
    duracion VARCHAR(50),
    recomendaciones TEXT
);

CREATE TABLE Producto (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255),
    precio DECIMAL(10, 2),
    stock INT,
    marca VARCHAR(255),
    cita_id BIGINT,
    FOREIGN KEY (cita_id) REFERENCES Cita(id) ON DELETE CASCADE
);

CREATE TABLE Pago (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    total DECIMAL(10, 2) NOT NULL,
    estado_pago VARCHAR(50),
    cita_id BIGINT,
    FOREIGN KEY (cita_id) REFERENCES Cita(id) ON DELETE CASCADE
);

CREATE TABLE Cita (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    fecha DATETIME NOT NULL,
    confirmacion BOOLEAN,
    estado_cita VARCHAR(50),
    propina DECIMAL(10, 2),
    comentario TEXT,
    cliente_id BIGINT,
    estilista_id BIGINT,
    FOREIGN KEY (cliente_id) REFERENCES Cliente(id),
    FOREIGN KEY (estilista_id) REFERENCES Estilista(id)
);

CREATE TABLE detalle_cita_servicios (
    cita_id BIGINT NOT NULL,
    servicio_id BIGINT NOT NULL,
    PRIMARY KEY (cita_id, servicio_id),
    FOREIGN KEY (cita_id) REFERENCES Cita(id) ON DELETE CASCADE,
    FOREIGN KEY (servicio_id) REFERENCES Servicio(id) ON DELETE CASCADE
);

CREATE TABLE detalle_cita_productos (
    cita_id BIGINT NOT NULL,
    producto_id BIGINT NOT NULL,
    PRIMARY KEY (cita_id, producto_id),
    FOREIGN KEY (cita_id) REFERENCES Cita(id) ON DELETE CASCADE,
    FOREIGN KEY (producto_id) REFERENCES Producto(id) ON DELETE CASCADE
);

CREATE TABLE Resena (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    calificacion INT NOT NULL,
    comentario TEXT,
    cliente_id BIGINT,
    cita_id BIGINT,
    FOREIGN KEY (cliente_id) REFERENCES Cliente(id) ON DELETE CASCADE,
    FOREIGN KEY (cita_id) REFERENCES Cita(id) ON DELETE CASCADE
);